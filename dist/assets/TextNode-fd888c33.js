import{r as l,j as s}from"./index-4d198d9d.js";const w=({node:e,onEdit:d,externalEditing:c,onEditingDone:u})=>{const[i,n]=l.useState(!1),[o,a]=l.useState(e.content||""),r=l.useRef(null);l.useEffect(()=>{a(e.content||"")},[e.content]),l.useEffect(()=>{c&&n(!0)},[c]),l.useEffect(()=>{if(i&&r.current){r.current.focus();const t=r.current.value.length;r.current.setSelectionRange(t,t)}},[i]);const f=()=>{n(!1),o!==e.content&&d(e.id,o),u&&u()},x=t=>{(t.ctrlKey||t.metaKey)&&t.key==="Enter"&&(t.preventDefault(),f()),t.key==="Escape"&&(a(e.content||""),n(!1))},h=e.view==="window"||e.view==="fullscreen";return s.jsx("div",{"data-node-id":e.id,style:{width:"100%",height:"100%",position:"relative",userSelect:i?"text":"none"},children:h?s.jsx("div",{className:"w-full h-full",style:{boxSizing:"border-box"},children:i?s.jsxs("div",{style:{position:"relative",width:"100%",height:"100%"},children:[s.jsx("textarea",{ref:r,value:o,onChange:t=>a(t.target.value),onKeyDown:x,className:"w-full h-full p-2 rounded-md border border-gray-200",style:{resize:"none",boxSizing:"border-box",fontSize:14}}),s.jsx("button",{onClick:()=>f(),className:"px-3 py-1 text-white",style:{position:"absolute",right:12,top:12,background:"#F68C1E",borderRadius:8,border:"none",cursor:"pointer"},children:"Save"})]}):s.jsx("div",{className:"w-full h-full p-2 bg-yellow-50 rounded-md overflow-auto",style:{whiteSpace:"pre-wrap",color:"#1f2937",fontSize:14,boxShadow:"inset 0 1px 0 rgba(0,0,0,0.02)"},onDoubleClick:()=>n(!0),children:e.content})}):s.jsx("div",{className:"w-full h-full p-4 flex items-center justify-center",children:s.jsx("div",{className:"text-lg text-gray-800 font-light",children:e.content})})})};export{w as default};
