import{r as s,j as t,a as g,b as m}from"./index-e5c07e13.js";const x=({node:r,onUpdate:a,allNodes:n,onAddToFolder:l})=>{const d=s.useMemo(()=>{const e={};return(n||[]).forEach(i=>{e[i.id]=i}),e},[n]),c=s.useMemo(()=>!r.children||r.children.length===0?[]:r.children.map(e=>d[e]).filter(Boolean),[r.children,d]),u=r.view==="window"||r.view==="fullscreen",[f,o]=s.useState(null);return u?t.jsx("div",{"data-node-id":r.id,style:{width:"100%",height:"100%",position:"relative",userSelect:"none",overflow:"hidden"},onDragOver:e=>e.preventDefault(),onDrop:e=>{e.preventDefault();const i=e.dataTransfer.getData("text/node-id");i&&l&&l(i,r.id)},children:t.jsx("div",{className:"w-full h-full",style:{padding:8},children:t.jsx("div",{className:"w-full h-full overflow-auto grid grid-cols-3 gap-2",style:{alignItems:"start",gridAutoRows:"min-content"},onClick:()=>{o(null)},children:c.map(e=>t.jsx("div",{className:`relative bg-gray-50 rounded text-center text-sm shadow-sm ${f===e.id?"ring-2 ring-orange-300":""}`,style:{padding:0,display:"flex",justifyContent:"center"},draggable:!0,onDragStart:i=>{i.dataTransfer.setData("text/node-id",e.id);try{i.dataTransfer.effectAllowed="move"}catch{}},onClick:()=>{o(e.id)},onDoubleClick:i=>{i.stopPropagation(),a&&a(e.id,{view:"fullscreen"})},children:t.jsx("div",{style:{pointerEvents:"none",padding:8},children:t.jsx(m,{type:e.type,title:e.title,label:e.content})})},e.id))})})}):t.jsx("div",{"data-node-id":r.id,style:{width:"100%",height:"100%",position:"relative",userSelect:"none"},children:t.jsx("div",{className:"w-full h-full flex items-center justify-center p-2 bg-gray-50 rounded-lg",children:t.jsxs("div",{className:"text-center",children:[t.jsx(g,{size:28,className:"text-gray-500 mb-2 mx-auto"}),t.jsx("div",{className:"text-sm text-gray-700",children:r.content})]})})})};export{x as default};
