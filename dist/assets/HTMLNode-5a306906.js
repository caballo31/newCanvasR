import{c as d,r as i,j as e,C as f,P as m}from"./index-4d198d9d.js";const y=d("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),b=d("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),j=({node:t,onEdit:n,externalEditing:r,onEditingDone:a})=>{const[p,o]=i.useState(!1),[c,l]=i.useState(t.content||""),h=i.useRef(null);i.useEffect(()=>{r&&o(!0)},[r]),i.useEffect(()=>{l(t.content||"")},[t.content]);const x=()=>{n&&n(t.id,c),o(!1),a&&a()},u=()=>{l(t.content||""),o(!1),a&&a()},g=t.view==="window"||t.view==="fullscreen";return e.jsx("div",{"data-node-id":t.id,style:{width:"100%",height:"100%",position:"relative",userSelect:"none"},children:p?e.jsxs("div",{style:{width:"100%",height:"100%",padding:8,boxSizing:"border-box"},children:[e.jsx("textarea",{ref:h,value:c,onChange:s=>l(s.target.value),style:{width:"100%",height:"calc(100% - 44px)",resize:"none",fontFamily:"monospace"}}),e.jsxs("div",{style:{display:"flex",gap:8,marginTop:8},children:[e.jsx("button",{onClick:s=>{s.stopPropagation(),x()},className:"px-3 py-1 bg-green-600 text-white rounded-md",children:e.jsx(y,{size:14})}),e.jsx("button",{onClick:s=>{s.stopPropagation(),u()},className:"px-3 py-1 bg-gray-200 text-black rounded-md",children:e.jsx(b,{size:14})})]})]}):e.jsx("div",{style:{width:"100%",height:"100%",position:"relative",overflow:"hidden"},children:g?e.jsxs("div",{style:{width:"100%",height:"100%",position:"relative"},children:[e.jsx("iframe",{title:`html-node-${t.id}`,srcDoc:t.content||"",sandbox:"allow-same-origin allow-scripts allow-popups allow-forms",style:{width:"100%",height:"100%",border:"none"}}),e.jsx("button",{onClick:s=>{s.stopPropagation(),o(!0)},onPointerDown:s=>s.stopPropagation(),style:{position:"absolute",right:10,bottom:10,zIndex:50,background:"rgba(255,255,255,0.9)",border:"1px solid rgba(0,0,0,0.08)",padding:6,borderRadius:8},"aria-label":"Editar HTML",children:e.jsx(m,{size:14})})]}):e.jsx("div",{className:"w-full h-full flex items-center justify-center p-4 bg-gray-50 rounded-lg",style:{pointerEvents:"none"},children:e.jsxs("div",{className:"text-center",children:[e.jsx(f,{size:24,className:"text-gray-400 mb-2 mx-auto"}),e.jsx("div",{className:"text-sm text-gray-600",children:t.content})]})})})})};export{j as default};
