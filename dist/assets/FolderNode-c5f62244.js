import{r as s,j as t,a as g,b as m}from"./index-811de0d4.js";const x=({node:i,onUpdate:a,allNodes:n,onAddToFolder:l})=>{const d=s.useMemo(()=>{const e={};return(n||[]).forEach(r=>{e[r.id]=r}),e},[n]),c=s.useMemo(()=>!i.children||i.children.length===0?[]:i.children.map(e=>d[e]).filter(Boolean),[i.children,d]),u=i.view==="window"||i.view==="fullscreen",[f,o]=s.useState(null);return u?t.jsx("div",{"data-node-id":i.id,style:{width:"100%",height:"100%",position:"relative",userSelect:"none",overflow:"hidden"},onDragOver:e=>e.preventDefault(),onDrop:e=>{e.preventDefault();const r=e.dataTransfer.getData("text/node-id");r&&l&&l(r,i.id)},children:t.jsx("div",{className:"w-full h-full",style:{padding:8},children:t.jsx("div",{className:"w-full h-full overflow-auto grid grid-cols-3 gap-2",style:{alignItems:"start",gridAutoRows:"min-content"},onClick:()=>{o(null)},children:c.map(e=>t.jsx("div",{"data-child-id":e.id,className:`relative bg-gray-50 rounded text-center text-sm shadow-sm ${f===e.id?"ring-2 ring-orange-300":""}`,style:{padding:0,display:"flex",justifyContent:"center"},draggable:!0,onDragStart:r=>{r.dataTransfer.setData("text/node-id",e.id);try{r.dataTransfer.effectAllowed="move"}catch{}},onClick:()=>{o(e.id)},onDoubleClick:r=>{r.stopPropagation(),a&&a(e.id,{view:"fullscreen"})},children:t.jsx("div",{style:{pointerEvents:"none",padding:8},children:t.jsx(m,{type:e.type,title:e.title,label:e.content})})},e.id))})})}):t.jsx("div",{"data-node-id":i.id,style:{width:"100%",height:"100%",position:"relative",userSelect:"none"},children:t.jsx("div",{className:"w-full h-full flex items-center justify-center p-2 bg-gray-50 rounded-lg",children:t.jsxs("div",{className:"text-center",children:[t.jsx(g,{size:28,className:"text-gray-500 mb-2 mx-auto"}),t.jsx("div",{className:"text-sm text-gray-700",children:i.content})]})})})};export{x as default};
